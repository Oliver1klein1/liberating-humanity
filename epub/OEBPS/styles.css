/* Root variables */
:root {
    --primary-color: #2c5282;
    --secondary-color: #e53e3e;
    --accent-color: #f6ad55;
    --text-color: #2d3748;
    --background-color: #f7fafc;
    --callout-bg: #ebf8ff;
    --note-bg: #fefcbf;
    --content-width: 800px;
    --quote-bg: #f7fafc;
    --comparison-border: #e2e8f0;
    --border-color: #cbd5e0;
    --part-border-color: #2c5282;
}

/* Base styles */
body {
    font-family: 'Georgia', serif;
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    color: #333;
    text-align: justify;
}

main {
    width: 100%;
    max-width: var(--content-width);
    margin: 0 auto;
    padding: 0 1em;
}

#chapter-content {
    width: 100%;
    max-width: var(--content-width);
    margin: 0 auto;
    padding: 0 1em;
}

/* Title page styles */
.title-page {
    text-align: center;
    padding: 4rem 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.main-title {
    font-size: 4.5rem;
    font-weight: bold;
    color: var(--primary-color);
    margin-top: 8rem;
    margin-bottom: 2rem;
}

.subtitle {
    font-size: 1.8rem;
    color: var(--text-color);
    margin-bottom: 1.5rem;
    line-height: 1.4;
}

.subtitle-2 {
    font-size: 1.4rem;
    color: var(--text-color);
    margin-bottom: 3rem;
    line-height: 1.4;
}

.author-name {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--primary-color);
    text-transform: uppercase;
}

/* Copyright page styles */
.copyright-page {
    text-align: center;
    padding: 4rem 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.copyright-text {
    font-size: 0.9rem;
    color: var(--text-color);
    line-height: 1.6;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    text-align: center;
    color: #2c3e50;
    margin-top: 1.5em;
    margin-bottom: 0.8em;
}

/* Table of Contents */
nav[epub|type='toc'] > ol {
    list-style: none !important;
    padding-left: 0;
    counter-reset: none !important;
}

nav[epub|type='toc'] ol {
    list-style: none !important;
    padding-left: 1.5em;
    margin: 0;
    counter-reset: none !important;
}

nav[epub|type='toc'] li {
    margin: 0.5em 0;
    list-style: none !important;
    counter-increment: none !important;
}

nav[epub|type='toc'] li::before {
    content: none !important;
}

nav[epub|type='toc'] a {
    text-decoration: none;
    color: #2c3e50;
}

nav[epub|type='toc'] span {
    font-weight: bold;
    color: #1a365d;
}

.toc-list, .toc-list ol, .toc-list li {
    list-style: none !important;
    counter-reset: none !important;
    counter-increment: none !important;
}

.toc-list li::before {
    content: none !important;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5em 0;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

th, td {
    padding: 0.75em 1em;
    text-align: left;
    border: 1px solid #e2e8f0;
}

th {
    background-color: #4a5568;
    color: white;
    font-weight: bold;
}

tr:nth-child(even) {
    background-color: #f7fafc;
}

/* Boxes and Callouts */
.callout {
    margin: 2em auto;
    padding: 1.5em;
    background-color: #e3f2fd;
    border-left: 4px solid #2c5282;
    border-top: none;
    border-right: none;
    border-bottom: none;
    border-radius: 8px;
    max-width: 90%;
    font-style: italic;
    font-family: 'Georgia', serif;
}

.callout p {
    margin: 0 0 1em 0;
    line-height: 1.6;
    font-size: 1.1rem;
    text-align: left;
}

/* Simple inline verse quote - no box, minimal styling for better page breaks */
.inline-verse {
    margin: 2em 0;
    padding: 0;
    text-indent: 2em;
    font-style: italic;
    font-size: 1.3em;
    color: #2c3e50;
    line-height: 1.6;
    background: none;
    border: none;
}

.inline-verse p {
    margin: 0;
    padding: 0;
}

.inline-verse .verse-ref {
    font-style: normal;
    margin-left: 0.5em;
    color: #666;
}

.callout .quote-author,
.callout cite {
    display: block;
    text-align: right;
    font-size: 0.9rem;
    margin-top: 0.5em;
    font-style: italic;
}

.note, .infographic {
    margin: 2em auto;
    padding: 1.5em;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    max-width: 90%;
}

.note {
    background-color: var(--quote-bg);
    border-left: 4px solid var(--primary-color);
    padding: 1.5rem;
    margin: 2rem 0;
    border-radius: 0.5rem;
}

.infographic {
    background-color: #f0fff4;
    border-color: #9ae6b4;
}

/* Contrast Box */
.contrast-box {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2em;
    margin: 2em 0;
    padding: 1.5em;
    background-color: #f7fafc;
    border: 1px solid #e2e8f0;
    border-radius: 0.5em;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.contrast-side {
    padding: 1em;
    border-radius: 0.3em;
}

.contrast-side-1 {
    background-color: #fff5f5;
    border: 1px solid #fc8181;
}

.contrast-side-2 {
    background-color: #f0fff4;
    border: 1px solid #9ae6b4;
}

.contrast-title {
    font-size: 1.2em;
    font-weight: bold;
    text-align: center;
    margin-bottom: 1em;
    color: #2d3748;
}

@media screen and (max-width: 768px) {
    .contrast-box {
        grid-template-columns: 1fr;
        gap: 1em;
    }
}

/* Journey boxes within infographic */
.three-part-journey {
    display: flex;
    flex-wrap: wrap;
}

.journey-box {
    flex: 1;
    min-width: 30%;
    margin: 1em;
    padding: 1.5em;
    background-color: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    page-break-inside: auto;
}

.journey-title {
    font-weight: bold;
    margin-bottom: 0.5em;
    color: #2d3748;
}

.journey-description {
    color: #4a5568;
    font-size: 0.95em;
}

.infographic-title {
    font-weight: bold;
    margin-bottom: 0.5em;
    color: #2d3748;
    text-align: center;
}

/* Note title styling */
.note-title {
    display: block;
    font-weight: bold;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
}

/* Text styling within boxes */
.text-xl {
    font-size: 1.25em;
}

.font-bold {
    font-weight: bold;
}

/* Chapter Titles */
.chapter-title {
    text-align: center;
    color: var(--primary-color);
    margin-bottom: 3rem;
    padding-top: 2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.chapter-number {
    display: block;
    font-size: 1.8em;
    font-weight: bold;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
    text-align: center;
}

.chapter-title > .chapter-number + *,
.chapter-title-text {
    margin-top: 0;
    display: block;
    text-align: center;
    width: 100%;
}

.chapter-title-text {
    font-size: 2.5rem;
    font-weight: bold;
}

/* Scripture Quotes */
.scripture-quote {
    margin: 2em 0;
    padding: 1.5em 2em;
    background-color: #f7f7ff;
    border-left: 4px solid #5c6ac4;
    font-style: italic;
    color: #2c3e50;
    line-height: 1.6;
    position: relative;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(92, 106, 196, 0.1);
}

.scripture-quote p {
    margin: 0;
    padding: 0;
    font-size: 1.1em;
}

.scripture-quote::before {
    content: '"';
    font-size: 3em;
    color: #2980b9;
    opacity: 0.2;
    position: absolute;
    left: 0.2em;
    top: 0.2em;
}

.scripture-quote::after {
    content: '"';
    font-size: 3em;
    color: #2980b9;
    opacity: 0.2;
    position: absolute;
    right: 0.2em;
    bottom: -0.5em;
}

/* First Quote of Chapter */
.scripture-quote:first-of-type {
    margin: 3em auto;
    padding: 2.5em;
    max-width: 85%;
    background: #f8fafc;
    border: 2px solid #2c5282;
    border-radius: 8px;
    position: relative;
    font-size: 1.5em;
    line-height: 1.7;
    color: #2d3748;
    text-align: center;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.scripture-quote:first-of-type::before {
    content: '"';
    position: absolute;
    left: 50%;
    top: -0.6em;
    transform: translateX(-50%);
    font-size: 4em;
    color: #2c5282;
    background: #f8fafc;
    padding: 0 0.2em;
    line-height: 1;
}

.scripture-quote:first-of-type p {
    margin: 0;
    padding: 0;
    font-size: 1em;
    font-weight: 700;
    font-style: normal;
}

.scripture-quote:first-of-type + p {
    text-align: right;
    color: #2c5282;
    font-style: italic;
    margin-top: -1.5em;
    margin-right: 4em;
    font-size: 1em;
    font-weight: normal;
}

/* Comparison Table Styles */
.comparison-container {
    max-width: 100%;
    margin: 2em auto;
    background-color: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(41, 128, 185, 0.1);
}

.comparison-box {
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    overflow: hidden;
}

.comparison-title {
    background-color: #2980b9;
    color: white;
    padding: 1em;
    text-align: center;
    font-weight: bold;
    font-size: 1.2em;
    border-bottom: 1px solid #e2e8f0;
}

.comparison {
    display: flex;
    border-bottom: 1px solid #e2e8f0;
    background-color: #fff;
}

.comparison:last-child {
    border-bottom: none;
}

.comparison-column {
    flex: 1;
    padding: 1.5em;
    background-color: #fff;
}

.comparison-column:first-child {
    border-right: 1px solid #e2e8f0;
    background-color: #fff5f5;
}

.comparison-column:last-child {
    background-color: #f0fff4;
}

.comparison-column h3 {
    margin: 0 0 1em 0;
    color: #2d3748;
    text-align: center;
    font-size: 1.1em;
}

.comparison-column .scripture-quote {
    margin: 0;
    padding: 1em;
    background-color: rgba(241, 248, 255, 0.7);
    border-left: none;
    border-radius: 6px;
    box-shadow: none;
}

.callout .comparison-container {
    margin: 0;
}

.callout {
    margin: 2em 0;
    padding: 0;
    background-color: transparent;
    border: none;
    border-radius: 12px;
    overflow: hidden;
}

/* Regular quotes */
.quote {
    margin: 2em 0;
    padding: 1.5em 2em;
    background-color: #f7f7ff;
    border-left: 4px solid #5c6ac4;
    font-style: italic;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(92, 106, 196, 0.1);
}

.quote p {
    margin: 0;
    line-height: 1.6;
}

/* First Quote of Chapter - Distinctive Box Design */
.first-quote {
    margin: 3.5em auto;
    padding: 3em;
    max-width: 85%;
    background: linear-gradient(to bottom right, #ffffff, #f8fafc);
    border: 1px solid #3b82f6;
    border-radius: 3px;
    position: relative;
    font-size: 1.4em;
    line-height: 1.7;
    color: #1e293b;
    text-align: center;
}

.first-quote::before,
.first-quote::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    border: 1px solid #3b82f6;
}

.first-quote::before {
    top: -1px;
    left: -1px;
    border-right: none;
    border-bottom: none;
}

.first-quote::after {
    bottom: -1px;
    right: -1px;
    border-left: none;
    border-top: none;
}

.first-quote p {
    margin: 0;
    padding: 0;
    font-style: italic;
    position: relative;
}

.first-quote cite {
    display: block;
    margin-top: 1.5em;
    font-size: 0.7em;
    color: #64748b;
    font-style: normal;
    text-align: right;
}

.first-quote cite::before {
    content: '—';
    margin-right: 0.5em;
}

/* Remove any conflicting opening-quote styles */
.opening-quote {
    margin: 2em 0;
    padding: 1.5em;
    font-style: italic;
    color: #1e293b;
    text-align: center;
}

.opening-quote::before,
.opening-quote::after {
    display: none;
}

/* Images */
img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 2em auto;
}

.unity-diagram img {
    max-width: 80%;
    height: auto;
    display: block;
    margin: 2em auto;
}

.timeline-image img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 2em auto;
}

figcaption {
    text-align: center;
    font-size: 0.9em;
    color: #718096;
    margin-top: 0.5em;
}

/* Navigation */
nav[epub|type='landmarks'] {
    margin-top: 2em;
    padding-top: 1em;
    border-top: 1px solid #e2e8f0;
}

nav[epub|type='landmarks'] a {
    color: #2c3e50;
    text-decoration: none;
}

/* Lists */
.icon-list {
    list-style: none;
    padding-left: 0;
}

.icon-list li {
    margin: 0.5em 0;
    padding-left: 1.5em;
    position: relative;
}

.check-list li:before {
    content: "✓";
    color: #48bb78;
    position: absolute;
    left: 0;
}

.xmark-list li:before {
    content: "✗";
    color: #e53e3e;
    position: absolute;
    left: 0;
}

/* Grid Layout */
.grid {
    display: grid;
    gap: 1em;
    margin: 1.5em 0;
}

.grid-cols-1 {
    grid-template-columns: 1fr;
}

@media screen and (min-width: 768px) {
    .md\:grid-cols-2 {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Text styles */
.text-xl {
    font-size: 1.25rem;
}

.font-bold {
    font-weight: bold;
}

/* Responsive design */
@media screen and (max-width: 992px) {
    .three-part-journey {
        grid-template-columns: repeat(2, 1fr);
    }
    .journey-box:last-child {
        grid-column: 1 / -1;
    }
}

@media screen and (max-width: 768px) {
    .three-part-journey {
        grid-template-columns: 1fr;
    }
    .journey-box {
        grid-column: 1;
    }
    .main-title {
        font-size: 2.5rem;
    }
    .subtitle {
        font-size: 1.5rem;
    }
    .subtitle-2 {
        font-size: 1.2rem;
    }
}

/* Cover image */
.cover-image {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0 auto;
}

/* Footnotes */
.footnote {
    font-size: 0.9em;
    color: #666;
    margin-top: 2em;
    border-top: 1px solid #ccc;
    padding-top: 1em;
}

/* Blockquotes */
blockquote {
    margin: 2rem 0;
    padding: 1rem 2rem;
    border-left: 4px solid #3498db;
    background: #f8f9fa;
    font-style: italic;
}

cite {
    color: #666;
    font-style: normal;
}

/* Textual changes table */
.textual-changes {
    margin: 2rem 0;
    background-color: white;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
}

.textual-changes th {
    background-color: #4a5568;
    color: white;
    padding: 1rem;
}

.textual-changes td {
    font-size: 0.95rem;
    padding: 1rem;
}

.textual-changes .original {
    color: #718096;
    font-style: italic;
    border-right: 2px solid #e2e8f0;
}

.textual-changes .changed {
    color: #2d3748;
    font-weight: 500;
}

.textual-changes .verse-ref {
    font-family: monospace;
    color: #718096;
    font-size: 0.85rem;
}

/* Lists */
ul, ol {
    margin: 1.2em 0;
    padding-left: 2em;
}

li {
    margin: 0.8em 0;
    line-height: 1.6;
}

/* Links */
a {
    color: #0066cc;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

/* Responsive table adjustments */
@media screen and (max-width: 768px) {
    .comparison-table {
        margin: 1rem 0;
    }
    
    .comparison-table table {
        min-width: 400px;
    }
    
    .comparison-table th,
    .comparison-table td {
        padding: 0.75rem;
    }
    
    .textual-changes th,
    .textual-changes td {
        padding: 0.75rem;
    }
}

/* Section titles */
.section-title {
    font-size: 1.5em;
    font-weight: bold;
    text-align: center;
    margin: 2em 0 1em;
    color: #2d3748;
}

/* Atrocity boxes */
.atrocity-box {
    margin: 2cm 0;
    padding: 1.5em;
    background-color: #fff5f5;
    border: 1px solid #fc8181;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* Remove top margin from first atrocity box */
.atrocity-box:first-of-type {
    margin-top: 0;
}

/* Remove bottom margin from last atrocity box */
.atrocity-box:last-of-type {
    margin-bottom: 0;
}

.atrocity-title {
    font-size: 1.2em;
    font-weight: bold;
    color: #c53030;
    margin-bottom: 1em;
    text-align: center;
}

.atrocity-box,
.callout.atrocity-box {
    font-style: normal !important;
}

.atrocity-box p,
.callout.atrocity-box p {
    color: #2d3748;
    line-height: 1.6;
    font-style: normal !important;
}

/* Manuscript boxes */
.manuscript-box {
    margin: 2em 0;
    padding: 1.5em;
    background-color: #f8f9fa;
    border: 1px solid #4a5568;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.manuscript-title {
    font-size: 1.2em;
    font-weight: bold;
    color: #2d3748;
    margin-bottom: 1em;
    text-align: center;
}

.manuscript-box p {
    color: #2d3748;
    line-height: 1.6;
    text-align: justify;
}

/* Ensure underlined text is clearly visible */
u {
    text-decoration: underline;
    text-decoration-thickness: 0.1em;
    text-underline-offset: 0.2em;
}

/* View boxes for contrasting perspectives */
.view-box {
    margin: 2em 0;
    padding: 1.5em;
    background-color: #f7f7ff;
    border: 1px solid #5c6ac4;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.view-title {
    font-size: 1.2em;
    font-weight: bold;
    color: #2d3748;
    margin-bottom: 1em;
    text-align: center;
}

.view-list {
    list-style-type: none;
    padding-left: 0;
    margin: 0;
}

.view-list li {
    margin: 0.75em 0;
    padding-left: 1.5em;
    position: relative;
    color: #2d3748;
    line-height: 1.4;
}

.view-list li:before {
    content: "•";
    position: absolute;
    left: 0.5em;
    color: #5c6ac4;
}

/* Claim boxes */
.claim-box {
    margin: 2em 0;
    padding: 1.5em;
    background-color: #fffaf0;
    border: 1px solid #ed8936;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.claim-title {
    font-size: 1.2em;
    font-weight: bold;
    color: #c05621;
    margin-bottom: 1em;
    text-align: center;
}

.claim-box p {
    color: #2d3748;
    line-height: 1.6;
    text-align: justify;
}

/* Historical boxes */
.historical-box {
    margin: 2em 0;
    padding: 1.5em;
    background-color: #f0f4f8;
    border: 1px solid #4a5568;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.historical-title {
    font-size: 1.2em;
    font-weight: bold;
    color: #2c5282;
    margin-bottom: 1em;
    text-align: center;
}

.historical-box p {
    color: #2d3748;
    line-height: 1.6;
    text-align: justify;
}

/* Add to existing styles */

.emphasis {
    font-weight: 600;
    font-size: 1.1rem;
    text-align: center;
    margin: 1.5rem 0;
}

.comparison-container {
    max-width: 100%;
    margin: 0 auto;
}

.comparison-box {
    border: 1px solid #e1e4e8;
    border-radius: 4px;
    overflow: hidden;
}

.comparison-title {
    background-color: #f1f8ff;
    padding: 1em;
    text-align: center;
    font-weight: bold;
    border-bottom: 1px solid #e1e4e8;
}

.comparison {
    display: flex;
    border-bottom: 1px solid #e1e4e8;
}

.comparison:last-child {
    border-bottom: none;
}

.comparison-column {
    flex: 1;
    padding: 1em;
}

.comparison-column:first-child {
    border-right: 1px solid #e1e4e8;
}

.comparison-column h3 {
    margin-top: 0;
    margin-bottom: 0.5em;
    color: #24292e;
}

.comparison-column .scripture-quote {
    margin: 0;
    background-color: transparent;
    border-left: none;
}

/* Ensure all XML entities are properly handled */
[class^="icon-list"] {
    list-style-type: none;
    padding-left: 0;
}

.check-list li::before {
    content: "✓";
    color: #15803d;
    margin-right: 0.5rem;
}

.xmark-list li::before {
    content: "✗";
    color: #b91c1c;
    margin-right: 0.5rem;
}

/* Bible quotes and callouts */
.bible-quote {
    margin: 2em 0;
    padding: 1.5em;
    background-color: #e3f2fd;
    border-left: 4px solid #2c5282;
    border-top: none;
    border-right: none;
    border-bottom: none;
    border-radius: 8px;
    font-style: italic;
    font-family: 'Georgia', serif;
}

.bible-quote p {
    margin: 0 0 1em 0;
    line-height: 1.6;
    font-size: 1.1rem;
    text-align: left;
}

.bible-quote .quote-author,
.bible-quote cite {
    display: block;
    text-align: right;
    font-size: 0.9rem;
    margin-top: 0.5em;
    font-style: italic;
}

.quote {
    margin: 2em 0;
    padding: 1.8em 2em;
    background-color: #f8fafc;
    border-left: 5px solid #3b82f6;
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
    color: #1e293b;
    line-height: 1.6;
}

.quote p {
    margin: 0;
    font-size: 1.1em;
    font-style: normal;
}

.quote-author {
    display: block;
    margin-top: 1.2em;
    color: #3b82f6;
    font-style: italic;
    font-weight: 600;
    font-size: 0.9em;
    text-align: right;
}

/* Navigation styles */
nav {
    margin: 2em auto;
    max-width: 800px;
}

nav ol {
    list-style-type: none;
    padding: 0;
}

nav li {
    margin: 0.5em 0;
}

nav a {
    color: #2c3e50;
    text-decoration: none;
}

nav a:hover {
    text-decoration: underline;
}

/* Table of Contents specific styles */
#toc {
    margin: 2em auto;
    max-width: 800px;
}

#toc h1 {
    text-align: center;
    color: #2c3e50;
}

#toc ol {
    list-style-type: none;
    padding: 0;
}

#toc li {
    margin: 0.5em 0;
}

#toc a {
    color: #2c3e50;
    text-decoration: none;
}

#toc a:hover {
    text-decoration: underline;
}

.callout {
    margin: 2em 0;
    padding: 1em;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
}

.callout p {
    margin: 0;
    font-style: italic;
    font-size: 1.1rem;
}

.comparison-title {
    font-weight: bold;
    color: var(--primary-color);
    margin-bottom: 1rem;
    font-size: 1.1rem;
}

.quote-author {
    display: block;
    font-style: italic;
    margin-top: 0.5rem;
    color: var(--primary-color);
}

b {
    color: var(--primary-color);
}

.chapter-header {
    margin-bottom: 3rem;
    text-align: center;
}

.chapter-number {
    font-size: 1.25rem;
    color: var(--primary-color);
    margin-bottom: 0;
    display: inline;
}

nav {
    margin-top: 4rem;
    padding-top: 2rem;
    border-top: 2px solid #ddd;
}

nav a {
    color: #3498db;
    text-decoration: none;
    font-weight: bold;
    transition: color 0.2s;
}

nav a:hover {
    color: #2980b9;
}

.chapter-nav {
    margin-top: 2em;
    padding-top: 1em;
    border-top: 1px solid #ddd;
}

.next-chapter {
    display: block;
    text-decoration: none;
    color: #0066cc;
    font-weight: bold;
}

.next-chapter:hover {
    color: #004499;
}

/* Key Point and Quote Styles */
.key-point, .quote, .scripture-quote {
    margin: 2em 0;
    padding: 1.5em 2em;
    background-color: #f7f7ff;
    border-left: 4px solid #5c6ac4;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(92, 106, 196, 0.1);
    font-style: normal;
    color: #2d3748;
    line-height: 1.6;
}

.key-point-title {
    display: block;
    font-weight: bold;
    color: #5c6ac4;
    margin-bottom: 1em;
    font-size: 1.1em;
}

/* Key Insight - Different Style */
.key-insight {
    margin: 2em 0;
    padding: 1.5em 2em;
    background-color: #ebf8ff;
    border-left: 4px solid #3182ce;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(49, 130, 206, 0.1);
}

.key-insight-title {
    display: block;
    font-weight: bold;
    color: #3182ce;
    margin-bottom: 1em;
    font-size: 1.1em;
}

/* Important Note - Different Style */
.important-note {
    margin: 2em 0;
    padding: 1.5em 2em;
    background-color: #fff5f5;
    border-left: 4px solid #e53e3e;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(229, 62, 62, 0.1);
}

.important-note-title {
    display: block;
    font-weight: bold;
    color: #e53e3e;
    margin-bottom: 1em;
    font-size: 1.1em;
}

/* Override any conflicting styles */
.quote p, .scripture-quote p, .key-point p {
    margin: 0;
    padding: 0;
    color: #2d3748;
    line-height: 1.6;
    font-style: normal;
}

/* Callout paragraphs should be italic */
.callout p {
    font-style: italic;
}

/* Remove conflicting quote decorations */
.scripture-quote::before,
.scripture-quote::after,
.quote::before,
.quote::after {
    content: none;
}

/* Ensure quote author styling */
.quote-author {
    display: block;
    margin-top: 1em;
    color: #5c6ac4;
    font-style: normal;
    font-weight: bold;
}

/* Key Point styling - matches the image */
.key-point {
    margin: 2.5em 0;
    padding: 2em;
    background-color: #f8fafc;
    border-left: 5px solid #3b82f6;
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
}

.key-point-title {
    display: block;
    font-weight: bold;
    color: #1e40af;
    margin-bottom: 1em;
    font-size: 1.2em;
}

/* First/Opening Quote - More Dramatic */
.opening-quote {
    margin: 3em 1.5em;
    padding: 2.5em;
    background-color: #f8fafc;
    border-left: 5px solid #3b82f6;
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
    font-size: 1.4em;
    line-height: 1.6;
    color: #1e293b;
    position: relative;
}

.opening-quote::before {
    content: '"';
    position: absolute;
    left: -0.5em;
    top: 0;
    font-size: 4em;
    color: #3b82f6;
    opacity: 0.2;
}

.opening-quote p {
    margin: 0;
    font-style: italic;
}

.opening-quote cite {
    display: block;
    margin-top: 1.5em;
    font-size: 0.8em;
    color: #64748b;
    font-style: normal;
    text-align: right;
}

/* Regular quotes - Similar to Key Point */
.quote, .scripture-quote {
    margin: 2em 0;
    padding: 1.8em 2em;
    background-color: #f8fafc;
    border-left: 5px solid #3b82f6;
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
    color: #1e293b;
    line-height: 1.6;
    font-style: normal;
}

.quote p, .scripture-quote p {
    margin: 0;
    font-size: 1.1em;
    font-style: normal;
}

/* Key Insight - Different Style */
.key-insight {
    margin: 2.5em 0;
    padding: 2em;
    background-color: #f0f9ff;
    border-left: 5px solid #0ea5e9;
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(14, 165, 233, 0.1);
}

.key-insight-title {
    display: block;
    font-weight: bold;
    color: #0369a1;
    margin-bottom: 1em;
    font-size: 1.2em;
}

/* Important Note - Different Style */
.important-note {
    margin: 2.5em 0;
    padding: 2em;
    background-color: #fef2f2;
    border-left: 5px solid #ef4444;
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.1);
}

.important-note-title {
    display: block;
    font-weight: bold;
    color: #b91c1c;
    margin-bottom: 1em;
    font-size: 1.2em;
}

/* Quote author styling */
.quote-author {
    display: block;
    margin-top: 1.2em;
    color: #3b82f6;
    font-style: italic;
    font-weight: 600;
    font-size: 0.9em;
    text-align: right;
}

/* Remove decorative quotes that might interfere */
.scripture-quote::before,
.scripture-quote::after {
    display: none;
}

/* Keep certain elements center-aligned */
h1, h2, h3, h4, h5, h6,
.title-page,
.copyright-page,
.chapter-header,
.section-title,
.opening-quote {
    text-align: center;
}

/* Keep certain elements left-aligned */
.quote-author,
.scripture-quote cite,
.opening-quote cite {
    text-align: right;
}

p {
    text-align: justify;
    hyphens: auto;
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
}

/* Chapter opening quote */
.chapter-opening-quote {
    margin: 3em auto !important;
    padding: 2em !important;
    max-width: 85% !important;
    text-align: center !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    background-color: #e3f2fd !important;
    border-left: 4px solid #2c5282 !important;
    border-top: none !important;
    border-right: none !important;
    border-bottom: none !important;
    border-radius: 8px !important;
    font-family: 'Georgia', serif !important;
    box-shadow: none !important;
}

.chapter-opening-quote p {
    font-size: 1.3em !important;
    font-weight: normal !important;
    line-height: 1.6 !important;
    margin: 0 0 1em 0 !important;
    padding: 0 !important;
    color: #2d3748 !important;
    max-width: 90% !important;
    font-style: italic !important;
    text-align: left !important;
}

.chapter-opening-quote cite,
.chapter-opening-quote .quote-author {
    display: block !important;
    margin-top: 0.5em !important;
    font-size: 0.9rem !important;
    font-style: italic !important;
    color: #2d3748 !important;
    text-align: right !important;
    align-self: flex-end !important;
    margin-right: 5% !important;
}

/* Remove any conflicting styles */
.first-quote, .opening-quote {
    display: none !important;
}

.quote p, .scripture-quote p, .key-point p {
    font-style: normal !important;
}

/* Bible quotes and callouts should be italic */
.bible-quote p, .callout p {
    font-style: italic !important;
}

.quote-author, .scripture-quote cite, .opening-quote cite {
    font-style: italic;
}

/* Comparison Table */
.comparison-table {
    width: 96%;              /* slightly narrower so borders don't clip on print */
    margin: 2em auto;        /* center the table */
    border-collapse: collapse;
    background: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    font-size: 1.1em;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    overflow: hidden;
}

.comparison-table th {
    background-color: #2c3e50;
    color: white;
    padding: 1.2em;
    text-align: center;
    font-size: 1.3em;
    border: none;
}

.comparison-table td {
    padding: 2em;
    vertical-align: top;
    border: 1px solid #e2e8f0;
    width: 50%;
}

.comparison-table tr td:first-child {
    background-color: white;
}

.comparison-table tr td:last-child {
    background-color: white;
}

.comparison-table .section-header {
    color: #2c3e50;
    font-weight: bold;
    text-align: center;
    margin-bottom: 1em;
    font-size: 1.2em;
}

.comparison-table .quote {
    margin: 0;
    padding: 0;
    background: transparent;
    border: none;
    box-shadow: none;
    font-size: 1.2em;
    color: #2d3748;
}

.comparison-table .reference {
    display: block;
    margin-top: 0.5em;
    color: #718096;
    font-size: 0.9em;
}

@media (max-width: 768px) {
    .comparison-table td {
        padding: 1.5em;
    }
    
    .comparison-table .section-header {
        font-size: 1.1em;
    }
    
    .comparison-table .quote {
        font-size: 1.1em;
    }
}

/* Part Divider Pages */
.part-divider {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 2rem;
    background-color: var(--background-color);
}

.part-content {
    max-width: var(--content-width);
    width: 100%;
    text-align: center;
    padding: 4rem 2rem;
}

.part-border-top,
.part-border-bottom {
    height: 3px;
    background: var(--part-border-color);
    margin: 2rem auto;
    width: 60%;
    position: relative;
}

.part-border-top::before,
.part-border-bottom::before {
    content: '';
    position: absolute;
    height: 1px;
    background: var(--part-border-color);
    width: 80%;
    left: 10%;
    opacity: 0.5;
}

.part-border-top::before {
    bottom: 6px;
}

.part-border-bottom::before {
    top: 6px;
}

.part-number {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--part-border-color);
    margin: 1rem 0;
    letter-spacing: 0.1em;
}

.part-title {
    font-size: 2rem;
    font-weight: 600;
    color: var(--text-color);
    margin: 1rem 0;
    line-height: 1.4;
}

/* Glossary styles */
.glossary dt {
    font-weight: bold;
    margin-top: 1.5em;
    color: var(--primary-color);
}

.glossary dd {
    margin-left: 1em;
    margin-bottom: 1.5em;
}

/* ============================================
   PRINT STYLES - 6x9 INCH PAPERBACK (B&W)
   ============================================ */

/* Hide navigation buttons only when preparing Kindle/KDP exports.
   Add class "kdp-mode" to the <body> element in the Kindle build to activate. */
body.kdp-mode nav.navigation,
body.kdp-mode .navigation,
body.kdp-mode nav[class="navigation"],
body.kdp-mode nav[class*="navigation"]:not([epub\:type="toc"]) {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}

body.kdp-mode .navigation a,
body.kdp-mode nav.navigation a,
body.kdp-mode nav[class="navigation"] a {
    display: none !important;
    visibility: hidden !important;
}

@media print {
    /* Page setup for 6x9 inch paperback */
    @page {
        size: 6in 9in;
        margin: 0.75in 0.875in; /* Top/bottom: 0.75in, Left/right: 0.875in (larger for binding/gutter) */
        /* Note: For bound books, manually set inside margin to 0.875in and outside to 0.625in in print dialog */
    }
    
    /* Ensure body respects page size */
    @page :first {
        size: 6in 9in;
    }
    
    @page :left {
        size: 6in 9in;
    }
    
    @page :right {
        size: 6in 9in;
    }
    
    /* CRITICAL: Hide ALL navigation elements FIRST - highest priority for print */
    /* This must come early to override everything else */
    /* Use maximum specificity to override inline styles */
    html body nav.navigation,
    html body .navigation,
    body nav.navigation,
    body .navigation,
    nav.navigation,
    .navigation,
    nav[class="navigation"],
    nav[class*="navigation"],
    [class*="navigation"],
    nav:not([epub\:type="toc"]):not([epub|type="toc"]),
    html body nav.navigation *,
    html body .navigation *,
    body nav.navigation *,
    body .navigation *,
    nav.navigation *,
    .navigation *,
    nav[class="navigation"] *,
    nav[class*="navigation"] *,
    [class*="navigation"] *,
    nav:not([epub\:type="toc"]):not([epub|type="toc"]) *,
    html body nav.navigation a,
    html body .navigation a,
    body nav.navigation a,
    body .navigation a,
    nav.navigation a,
    .navigation a,
    nav[class="navigation"] a,
    nav[class*="navigation"] a,
    [class*="navigation"] a,
    nav:not([epub\:type="toc"]):not([epub|type="toc"]) a,
    /* Target elements with inline styles - exact matches */
    nav[style],
    nav.navigation[style],
    .navigation[style],
    nav[class="navigation"][style],
    nav[class*="navigation"][style],
    html body nav.navigation[style],
    html body .navigation[style],
    body nav.navigation[style],
    body .navigation[style],
    nav.navigation a[style],
    .navigation a[style],
    nav[class="navigation"] a[style],
    nav[class*="navigation"] a[style],
    [class*="navigation"] a[style],
    html body nav.navigation a[style],
    html body .navigation a[style],
    body nav.navigation a[style],
    body .navigation a[style],
    /* Target links with inline display styles - exact attribute matching */
    a[style*="display: inline-block"],
    a[style*="display:inline-block"],
    a[style*="display: inline"],
    a[style*="display:inline"],
    a[style*="background: #007acc"],
    a[style*="background:#007acc"],
    a[style*="background-color: #007acc"],
    a[style*="background-color:#007acc"],
    /* Target specific navigation button text */
    a[href*="toc.xhtml"][style*="display"],
    a[href*="copyright.xhtml"][style*="display"],
    a[href*="title.xhtml"][style*="display"],
    a[href*="appendix"][style*="display"],
    a[href*="chapter"][style*="display"],
    a[href*="part"][style*="display"],
    a[href*="intro"][style*="display"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        max-height: 0 !important;
        max-width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        border: none !important;
        position: absolute !important;
        left: -9999px !important;
        top: -9999px !important;
        clip: rect(0, 0, 0, 0) !important;
        clip-path: inset(100%) !important;
        /* Force override inline display */
        display: none !important;
    }
    
    /* EXTREME: Target nav elements by their exact inline style content */
    nav[style*="text-align: center"][style*="margin-top"],
    nav[style*="text-align:center"][style*="margin-top"],
    nav[style*="border-top: 1px solid #eee"],
    nav[style*="border-top:1px solid #eee"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        max-height: 0 !important;
        max-width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        border: none !important;
        position: absolute !important;
        left: -9999px !important;
        top: -9999px !important;
        clip: rect(0, 0, 0, 0) !important;
        clip-path: inset(100%) !important;
    }
    
    /* Base print styles - 6x9 layout, BLACK AND WHITE for trade paperbacks */
    * {
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
        -webkit-filter: grayscale(100%) !important;
        filter: grayscale(100%) !important;
    }
    
    body {
        background: #fff !important;
        color: #000000 !important;
        font-family: 'Georgia', 'Times New Roman', Times, serif;
        font-size: 11pt;
        line-height: 1.6;
        max-width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        text-align: justify;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
        -webkit-filter: grayscale(100%) !important;
        filter: grayscale(100%) !important;
    }
    
    /* Links - black text with underline (except TOC) */
    a {
        text-decoration: underline !important;
        color: #000000 !important;
        -webkit-print-color-adjust: economy;
        print-color-adjust: economy;
    }
    
    /* Remove underlines from ALL TOC links when printing - multiple selectors for maximum compatibility */
    nav[epub\:type="toc"] a,
    nav[epub\:type="toc"] li a,
    nav[epub\:type="toc"] ol a,
    nav[epub\:type="toc"] ol li a,
    body nav[epub\:type="toc"] a,
    body nav[epub\:type="toc"] li a,
    body nav[epub\:type="toc"] ol a,
    body nav[epub\:type="toc"] ol li a,
    nav[epub|type="toc"] a,
    nav[epub|type="toc"] li a,
    nav[epub|type="toc"] ol a,
    nav[epub|type="toc"] ol li a {
        text-decoration: none !important;
        color: #000000 !important;
        border-bottom: none !important;
        -webkit-print-color-adjust: economy;
        print-color-adjust: economy;
    }
    
    /* Also target by href patterns common in TOC */
    nav[epub\:type="toc"] a[href*="chapter"],
    nav[epub\:type="toc"] a[href*="part"],
    nav[epub\:type="toc"] a[href*="appendix"],
    nav[epub\:type="toc"] a[href*="intro"],
    nav[epub\:type="toc"] a[href*="bibliography"],
    nav[epub\:type="toc"] a[href*="copyright"] {
        text-decoration: none !important;
        color: #000000 !important;
    }
    
    /* Convert all backgrounds to white and borders to black for black and white printing */
    .callout,
    .bible-quote,
    .note,
    .key-insight,
    .atrocity-box,
    div[style*="background-color"],
    div[style*="background:"] {
        background: #fff !important;
        color: #000000 !important;
        -webkit-print-color-adjust: economy;
        print-color-adjust: economy;
        -webkit-filter: grayscale(100%);
        filter: grayscale(100%);
    }
    
    /* Images - convert to grayscale */
    img {
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
        -webkit-filter: grayscale(100%) !important;
        filter: grayscale(100%) !important;
    }
    
    /* Preserve box shadows for depth (optional - can remove if needed) */
    /* Keep text shadows minimal or remove */
    * {
        text-shadow: none !important;
    }
    
    /* Force all text to black for black and white printing */
    * {
        color: #000000 !important;
    }
    
    /* Force all backgrounds to white (except body which is already white) */
    div, section, article, aside, header, footer, nav, main {
        background: #fff !important;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
    }
    
    /* Force all colored backgrounds to white */
    .callout,
    .bible-quote,
    .note,
    .key-insight,
    .important-note,
    .atrocity-box,
    .comparison-box,
    .comparison-container,
    .infographic,
    .quote,
    .scripture-quote,
    .key-point,
    .chapter-opening-quote,
    .contrast-box,
    .contrast-side-1,
    .contrast-side-2,
    .view-box,
    .claim-box,
    .historical-box,
    .manuscript-box {
        background: #fff !important;
        color: #000000 !important;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
        -webkit-filter: grayscale(100%) !important;
        filter: grayscale(100%) !important;
    }
    
    /* Convert colored borders to black */
    .callout,
    .bible-quote,
    .note,
    .key-insight,
    .important-note,
    .atrocity-box,
    .quote,
    .scripture-quote,
    .key-point,
    .chapter-opening-quote {
        border-color: #000000 !important;
    }

    /* Part 2 hero section: remove background shading and borders for print */
    .part2-hero {
        background: #ffffff !important;
        box-shadow: none !important;
    }

    .part2-hero hr {
        border: none !important;
        background: none !important;
        height: 0 !important;
        margin: 0 !important;
    }
    
    /* ADDITIONAL: Ensure navigation is hidden - catch any edge cases */
    /* Target any nav element that's not the TOC */
    body > nav:not([epub\:type="toc"]):not([epub|type="toc"]),
    body > nav.navigation,
    body > .navigation,
    main nav:not([epub\:type="toc"]):not([epub|type="toc"]),
    main nav.navigation,
    main .navigation,
    div nav:not([epub\:type="toc"]):not([epub|type="toc"]),
    div nav.navigation,
    div .navigation {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        position: absolute !important;
        left: -9999px !important;
    }
    
    /* Hide any links that look like navigation buttons (blue background, etc.) */
    a[style*="background: #007acc"],
    a[style*="background:#007acc"],
    a[style*="background-color: #007acc"],
    a[style*="background-color:#007acc"],
    a[href*="toc.xhtml"][style],
    a[href*="copyright.xhtml"][style],
    a[href*="title.xhtml"][style] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        position: absolute !important;
        left: -9999px !important;
    }

    /* Hide ALL navigation buttons when printing (but keep TOC nav, which has no "navigation" class) */
    /* CRITICAL: Must override inline styles with maximum specificity */
    nav.navigation,
    .navigation,
    nav[class="navigation"],
    nav[class*="navigation"],
    [class*="navigation"],
    nav:not([epub\:type="toc"]):not([epub|type="toc"]),
    nav:not([epub\:type="toc"]):not([epub|type="toc"]) *,
    body nav.navigation,
    body .navigation,
    html body nav.navigation,
    html body .navigation {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        position: absolute !important;
        left: -9999px !important;
        clip: rect(0, 0, 0, 0) !important;
        /* Override any inline display styles */
        display: none !important;
    }
    
    /* Hide ALL links inside navigation elements (except TOC) - MUST override inline styles */
    nav:not([epub\:type="toc"]):not([epub|type="toc"]) a,
    nav.navigation a,
    .navigation a,
    nav[class="navigation"] a,
    nav[class*="navigation"] a,
    [class*="navigation"] a,
    body nav.navigation a,
    body .navigation a,
    html body nav.navigation a,
    html body .navigation a,
    .next-chapter,
    .prev-chapter,
    .chapter-nav,
    button,
    input[type="button"],
    input[type="submit"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        position: absolute !important;
        left: -9999px !important;
        /* CRITICAL: Override inline display: inline-block styles */
        display: none !important;
    }
    
    /* Override inline styles on navigation elements - maximum specificity */
    nav.navigation[style],
    .navigation[style],
    nav[class="navigation"][style],
    nav[class*="navigation"][style],
    [class*="navigation"][style],
    body nav.navigation[style],
    body .navigation[style],
    html body nav.navigation[style],
    html body .navigation[style] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        position: absolute !important;
        left: -9999px !important;
    }
    
    /* Override inline styles on navigation links - MUST override display: inline-block */
    nav.navigation a[style],
    .navigation a[style],
    nav[class="navigation"] a[style],
    nav[class*="navigation"] a[style],
    [class*="navigation"] a[style],
    body nav.navigation a[style],
    body .navigation a[style],
    html body nav.navigation a[style],
    html body .navigation a[style],
    nav.navigation a[style*="display"],
    .navigation a[style*="display"],
    nav[class="navigation"] a[style*="display"],
    nav[class*="navigation"] a[style*="display"],
    [class*="navigation"] a[style*="display"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        position: absolute !important;
        left: -9999px !important;
        /* Force override inline display property */
        display: none !important;
    }
    
    /* NUCLEAR OPTION: Hide ALL navigation elements and classes (Kindle/KDP only) */
    body.kdp-mode .navigation,
    body.kdp-mode nav.navigation,
    body.kdp-mode nav[class="navigation"],
    body.kdp-mode nav[class*="navigation"],
    body.kdp-mode [class*="navigation"],
    body.kdp-mode nav[class*="navigation"]:not([epub\:type="toc"]) {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        border: none !important;
        position: absolute !important;
        left: -9999px !important;
    }
    
    /* Hide ALL nav elements except TOC content */
    body.kdp-mode nav:not([epub\:type="toc"]) {
        display: none !important;
        visibility: hidden !important;
        height: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Allow ONLY TOC content nav to display */
    body.kdp-mode nav[epub\:type="toc"] {
        display: block !important;
        visibility: visible !important;
    }
    
    /* Hide ALL links inside ANY navigation element (override inline styles) */
    body.kdp-mode .navigation a,
    body.kdp-mode nav.navigation a,
    body.kdp-mode nav[class="navigation"] a,
    body.kdp-mode nav:not([epub\:type="toc"]) a,
    body.kdp-mode [class="navigation"] a,
    body.kdp-mode [class*="navigation"] a {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        position: absolute !important;
        left: -9999px !important;
    }
    
    /* Override inline styles on navigation links - target all links with inline display styles */
    body.kdp-mode .navigation a[style],
    body.kdp-mode nav.navigation a[style],
    body.kdp-mode [class="navigation"] a[style],
    body.kdp-mode [class*="navigation"] a[style] {
        display: none !important;
        visibility: hidden !important;
        /* Force override any inline display property */
    }
    
    /* Additional catch-all for any remaining navigation elements */
    body.kdp-mode nav:not([epub\:type="toc"]),
    body.kdp-mode .navigation,
    body.kdp-mode nav.navigation {
        display: none !important;
        visibility: hidden !important;
        height: 0 !important;
        overflow: hidden !important;
    }
    
    /* Preserve TOC content */
    body.kdp-mode nav[epub\:type="toc"],
    body.kdp-mode nav[epub\:type="toc"] *,
    body.kdp-mode nav[epub\:type="toc"] h1,
    body.kdp-mode nav[epub\:type="toc"] ol,
    body.kdp-mode nav[epub\:type="toc"] li,
    body.kdp-mode nav[epub\:type="toc"] a {
        display: block !important;
        color: #000 !important;
    }
    
    body.kdp-mode nav[epub\:type="toc"] h1 {
        font-size: 18pt !important;
        font-weight: bold !important;
        margin-bottom: 1em !important;
        border-bottom: 2px solid #000 !important;
        padding-bottom: 0.5em !important;
    }
    
    body.kdp-mode nav[epub\:type="toc"] ol {
        list-style: none !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    body.kdp-mode nav[epub\:type="toc"] li {
        margin: 0.4em 0 !important;
    }
    
    /* Convert TOC links to plain text for print */
    body.kdp-mode nav[epub\:type="toc"] a {
        text-decoration: none !important;
        padding: 0.3em 0 !important;
        border-left: none !important;
        background: transparent !important;
        display: block !important;
        color: #000 !important;
    }
    
    /* TOC page body styling - ensure content displays */
    body {
        max-width: 100% !important;
    }
    
    /* Convert all text colors to black ONLY in kdp-mode */
    body.kdp-mode * {
        color: #000 !important;
    }
    
    /* Preserve white backgrounds, remove colored backgrounds ONLY in kdp-mode */
    body.kdp-mode,
    html body.kdp-mode {
        background: #fff !important;
    }
    
    /* Preserve background for callouts/boxes using borders - B&W only in kdp-mode */
    body.kdp-mode .callout,
    body.kdp-mode .bible-quote,
    body.kdp-mode .chapter-opening-quote {
        background: #f0f0f0 !important; /* Light gray for print */
        border: none !important;
        border-left: 4px solid #000 !important; /* Black border for print */
        border-radius: 8px !important;
        padding: 0.75rem 1rem !important;
        margin-top: 0.5rem !important; /* Reduced top margin to allow starting on previous page */
        margin-bottom: 1rem !important;
        page-break-inside: auto !important;
        page-break-before: auto !important; /* Allow callout to start on previous page if space allows */
        font-style: italic !important;
    }
    
    .note,
    .key-insight,
    .highlight {
        background: #fff !important;
        border: 1px solid #000 !important;
        border-left: 4px solid #000 !important;
        padding: 0.75rem 1rem !important;
        margin-top: 0.5rem !important; /* Reduced top margin to avoid forcing new page */
        margin-bottom: 0.5rem !important;
        page-break-inside: auto !important; /* Allow notes to break across pages */
        page-break-before: auto !important; /* Don't force new page before note */
        color: #000 !important;
    }
    
    .note p {
        page-break-inside: auto !important;
        orphans: 2 !important;
        widows: 2 !important;
    }
    
    /* Remove colored backgrounds, use borders instead - but exclude book series sections */
    .atrocity-box,
    .comparison-table,
    .infographic,
    [style*="background-color"]:not([style*="background: #fff8e1"]):not([style*="background: #e8f5e9"]):not([style*="background:#fff8e1"]):not([style*="background:#e8f5e9"]):not([style*="background: #f8f9fa"]):not([style*="background:#f8f9fa"]),
    [style*="background:"]:not([style*="background: #fff8e1"]):not([style*="background: #e8f5e9"]):not([style*="background:#fff8e1"]):not([style*="background:#e8f5e9"]):not([style*="background: #f8f9fa"]):not([style*="background:#f8f9fa"]) {
        background: #fff !important;
        border: 1px solid #000 !important;
        page-break-inside: auto !important; /* Allow cards to break across pages */
    }
    
    /* All book series sections use the same outer card styling - no borders needed */
    .other-books-section {
        border: none !important;
    }
    
    /* Keep other-books-section styling - it should have its background and no border */
    .other-books-section,
    div.other-books-section {
        border: none !important;
    }
    
    /* Explicit margin for atrocity boxes in print */
    .atrocity-box,
    .callout.atrocity-box {
        margin: 1.4cm 0 !important;  /* Spacing between atrocity cards */
        border-radius: 8px !important;  /* Rounded corners for atrocity cards */
    }
    
    /* Remove top margin from first atrocity box in print - especially when following section-title */
    .atrocity-box:first-of-type,
    .callout.atrocity-box:first-of-type,
    .section-title + .atrocity-box,
    .section-title + .callout.atrocity-box {
        margin-top: 0.6cm !important;  /* Reduced top margin when following section title */
    }
    
    /* Remove bottom margin from last atrocity box in print */
    .atrocity-box:last-of-type,
    .callout.atrocity-box:last-of-type {
        margin-bottom: 0 !important;
    }
    
    /* Preserve rounded corners - border-radius from inline styles should be preserved automatically
       Inline styles have the highest CSS specificity, so border-radius values like "8px" from 
       inline style attributes will be respected in print by modern browsers */
    
    /* Allow page breaks within nested boxes inside cards */
    div[style*="background-color"][style*="padding"] div[style*="background-color"] {
        page-break-inside: auto !important;
    }
    
    /* Allow breaks in flex containers inside cards */
    div[style*="background-color"] div[style*="display: flex"],
    div[style*="background:"] div[style*="display: flex"] {
        page-break-inside: auto !important;
    }
    
    /* Allow breaks in flex items inside cards */
    div[style*="background-color"] div[style*="flex:"],
    div[style*="background:"] div[style*="flex:"] {
        page-break-inside: auto !important;
    }
    
    /* Fix books-grid layout for print - convert grid to block to prevent overlapping text */
    .books-grid,
    div[style*="display: grid"][style*="grid-template-columns"] {
        display: block !important;
        grid-template-columns: none !important;
        max-width: 100% !important;
        width: 100% !important;
    }
    
    /* Keep book entries together (image + description) */
    .book-entry {
        display: block !important;
        width: 100% !important;
        margin-bottom: 2em !important;
        page-break-inside: avoid !important;
        break-inside: avoid !important;
    }
    
    .books-grid .book-item,
    .book-entry > div:first-child {
        display: block !important;
        text-align: center !important;
        margin-bottom: 1em !important;
        width: 100% !important;
    }
    
    .books-grid .book-description,
    .book-entry > div:last-child {
        display: block !important;
        width: 100% !important;
        max-width: 100% !important;
        text-align: left !important;
        margin-bottom: 0 !important;
        box-sizing: border-box !important;
    }
    
    .books-grid .book-entry img,
    .book-entry img {
        margin: 0 auto !important;
    }
    
    /* Ensure equal width for book descriptions in screen view */
    @media screen {
        .books-grid {
            display: grid !important;
            grid-template-columns: calc(400px - 1cm) 1fr !important;
            gap: 1.5em !important;
            align-items: start !important;
        }
        
        .books-grid .book-entry {
            display: contents !important; /* Makes children participate in parent grid */
        }
        
        .books-grid .book-item,
        .books-grid .book-entry > div:first-child {
            grid-column: 1 !important;
            min-width: 0 !important;
            width: 100% !important;
            max-width: calc(400px - 1cm) !important;
            justify-self: center !important;
        }
        
        .books-grid .book-description,
        .books-grid .book-entry > div:last-child {
            grid-column: 2 !important;
            width: 100% !important;
            max-width: 100% !important;
            min-width: 0 !important;
            box-sizing: border-box !important;
            overflow-wrap: break-word !important;
        }
    }
    
    /* Typography for print - black and white */
    h1, h2, h3, h4, h5, h6 {
        page-break-after: avoid;
        page-break-inside: avoid;
        margin-top: 1.2em;
        margin-bottom: 0.6em;
        color: #000000 !important;
    }
    
    h1, .chapter-title, .main-title {
        font-size: 18pt;
        font-weight: bold;
        text-align: center;
        color: #000000 !important;
    }
    
    h2 {
        font-size: 16pt;
        font-weight: bold;
        color: #000000 !important;
    }
    
    h3, .section-title {
        font-size: 14pt;
        font-weight: bold;
        margin-bottom: 0.3em !important;  /* Reduce bottom margin to bring atrocity boxes closer */
        color: #000000 !important;
    }
    
    h4 {
        font-size: 12pt;
        font-weight: bold;
        color: #000000 !important;
    }
    
    /* Paragraphs and text - black and white */
    p {
        page-break-inside: avoid;
        page-break-before: avoid;
        orphans: 3;
        widows: 3;
        margin-bottom: 0.5em;
        color: #000000 !important;
    }
    
    /* Allow breaks in paragraphs inside cards/boxes to improve page flow */
    div[style*="background-color"] p,
    div[style*="background:"] p {
        page-break-inside: auto !important;
        orphans: 2 !important;
        widows: 2 !important;
    }
    
    /* Allow headings in cards to break, but keep heading with first paragraph */
    div[style*="background-color"] h3,
    div[style*="background-color"] h4,
    div[style*="background:"] h3,
    div[style*="background:"] h4 {
        page-break-after: avoid !important;
    }
    
    /* Preserve emphasis styles (color comes from normal styles or kdp-mode override) */
    b, strong, .font-bold {
        font-weight: bold !important;
    }
    
    i, em, .font-italic {
        font-style: italic !important;
    }
    
    /* Images - optimize sizing (BLACK AND WHITE) */
    img {
        /* Don't override inline max-width - allow inline styles to control sizing */
        height: auto !important;
        page-break-inside: avoid;
        page-break-before: avoid;
        display: block;
        margin: 0.75rem auto;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
        -webkit-filter: grayscale(100%) !important;
        filter: grayscale(100%) !important;
    }
    
    /* Prevent image containers from starting on new pages */
    div[style*="text-align: center"] {
        page-break-before: avoid !important;
        page-break-inside: avoid !important;
    }
    
    /* Ensure paragraphs before images don't break away */
    p + div[style*="text-align: center"],
    p + div[style*="text-align: center"] img {
        page-break-before: avoid !important;
    }
    
    /* Prevent images from breaking away from preceding paragraphs */
    p {
        page-break-after: avoid;
    }
    
    p + div img {
        page-break-before: avoid !important;
    }
    
    /* CRITICAL: Override general paragraph rules for callout paragraphs to allow breaking */
    .callout p,
    .bible-quote p,
    .note p {
        page-break-inside: auto !important;
        page-break-before: auto !important;
        page-break-after: auto !important;
        break-inside: auto !important;
        -webkit-column-break-inside: auto !important;
        orphans: 1 !important;
        widows: 1 !important;
        display: block !important;
        white-space: normal !important;
    }
    
    /* Prevent callouts from forcing page breaks when there's space */
    .callout,
    .bible-quote,
    .note {
        /* Layout - ensure block display, no fixed heights, allow overflow */
        display: block !important;
        height: auto !important;
        min-height: auto !important;
        max-height: none !important;
        overflow: visible !important;
        
        /* Box model - ensure padding doesn't prevent breaking */
        box-sizing: border-box !important;
        
        /* Page break controls - allow breaking inside */
        page-break-before: avoid !important;
        page-break-inside: auto !important;
        page-break-after: auto !important;
        break-inside: auto !important;
        -webkit-column-break-inside: auto !important;
        
        /* Widows/orphans - minimal to allow more flexible breaking */
        orphans: 1 !important;
        widows: 1 !important;
        
        /* Allow text to wrap and break */
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        
        /* Spacing - minimal for print to maximize content space */
        margin-top: 0.2em !important;
        margin-bottom: 0.2em !important;
        padding-top: 0.3rem !important;
        padding-bottom: 0.3rem !important;
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
    }
    
    /* Keep paragraphs before callouts with the callout */
    p + .callout,
    p + .bible-quote,
    p + .note {
        page-break-before: avoid !important;
    }
    
    /* Allow callout content to break if necessary - reduce restrictions */
    .callout p,
    .bible-quote p,
    .note p {
        /* Ensure paragraphs can break */
        display: block !important;
        page-break-inside: auto !important;
        break-inside: auto !important;
        -webkit-column-break-inside: auto !important;
        
        /* Minimal widows/orphans for flexible breaking - allow single lines */
        orphans: 1 !important;
        widows: 1 !important;
        
        /* Allow text to wrap and break naturally */
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        
        /* Minimal spacing to maximize content space */
        margin-bottom: 0.1em !important;
        margin-top: 0 !important;
        padding: 0 !important;
    }
    
    /* Ensure inline elements inside paragraphs can break - critical for <i>, <b>, etc. */
    .callout p *,
    .callout p i,
    .callout p em,
    .callout p b,
    .callout p strong,
    .callout p span,
    .bible-quote p *,
    .bible-quote p i,
    .bible-quote p em,
    .bible-quote p b,
    .bible-quote p strong,
    .bible-quote p span {
        display: inline !important;
        page-break-inside: auto !important;
        break-inside: auto !important;
        -webkit-column-break-inside: auto !important;
        orphans: 1 !important;
        widows: 1 !important;
        white-space: normal !important;
        /* Force inline elements to allow breaking anywhere */
        word-break: break-word !important;
        overflow-wrap: break-word !important;
    }
    
    /* Specifically target the last child paragraph to ensure it can break */
    .callout > p:last-child,
    .bible-quote > p:last-child {
        page-break-inside: auto !important;
        break-inside: auto !important;
        -webkit-column-break-inside: auto !important;
        orphans: 1 !important;
        widows: 1 !important;
        margin-bottom: 0 !important;
        padding-bottom: 0 !important;
    }
    
    /* Ensure quote authors and references can break with content */
    .callout .quote-author,
    .callout cite,
    .callout .reference,
    .bible-quote .quote-author,
    .bible-quote cite,
    .bible-quote .reference {
        display: inline !important;
        page-break-inside: auto !important;
        orphans: 1 !important;
        widows: 1 !important;
        margin-top: 0 !important;
        margin-left: 0.3em !important;
    }
    
    /* Force callout paragraphs to allow breaking even with minimal space */
    .callout p:last-child {
        page-break-inside: auto !important;
        break-inside: auto !important;
        orphans: 1 !important;
        widows: 1 !important;
        margin-bottom: 0 !important;
        padding-bottom: 0 !important;
    }
    
    /* Minimize bottom padding to maximize space for content */
    .callout {
        padding-bottom: 0.2rem !important;
    }
    
    /* Reduce spacing further to allow more content to fit */
    .callout:first-child,
    .bible-quote:first-child {
        margin-top: 0.25em !important;
    }
    
    /* Inline verse quotes - minimal styling, breaks naturally */
    .inline-verse {
        margin: 0.5em 0 !important;
        padding: 0 !important;
        text-indent: 2em !important;
        font-size: 1.3em !important;
        page-break-inside: auto !important;
        orphans: 1 !important;
        widows: 1 !important;
        background: none !important;
        border: none !important;
    }
    
    .inline-verse p {
        margin: 0 !important;
        padding: 0 !important;
        page-break-inside: auto !important;
    }
    
    .inline-verse .verse-ref {
        margin-left: 0.3em !important;
    }
    
    /* Allow callouts to start on current page even if only a few lines fit */
    .callout,
    .bible-quote {
        min-height: auto !important;
        height: auto !important;
    }
    
    /* Force callouts to break inside when needed - be more aggressive */
    .callout,
    .bible-quote,
    .note {
        display: block !important;          /* not flex/inline-block/table */
        overflow: visible !important;       /* override overflow: hidden to allow breaking */
        height: auto !important;            /* no fixed height */
        min-height: auto !important;        /* no minimum height constraint */
        break-inside: auto !important;
        -webkit-column-break-inside: auto !important;
        page-break-inside: auto !important;
        widows: 1 !important;               /* allow single lines at top/bottom */
        orphans: 1 !important;              /* allow single lines at top/bottom */
    }
    
    /* Reduce spacing further to allow more content to fit */
    .callout:first-child,
    .bible-quote:first-child {
        margin-top: 0.25em !important;
    }

    /* All images in grayscale for print */
    img {
        filter: grayscale(100%) !important;
        -webkit-filter: grayscale(100%) !important;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
    }
    
    /* If no inline max-width is set, default to 100% */
    img[style*="max-width"] {
        /* Respect inline max-width styles */
    }
    
    /* Quotes and callouts - layout only (colors handled by main styles / kdp-mode override) */
    .bible-quote,
    .chapter-opening-quote {
        font-style: italic;
        padding: 0.75rem 1rem !important;
        margin: 1rem 0 !important;
        page-break-inside: avoid;
    }

    /* Allow long callout paragraphs to split across pages (prevents big blank gaps) */
    /* This rule must come after general paragraph rules to override them */
    .callout p,
    .callout > p,
    div.callout p,
    .bible-quote p,
    .bible-quote > p,
    div.bible-quote p {
        page-break-inside: auto !important;
        page-break-before: auto !important;
        page-break-after: auto !important;
        break-inside: auto !important;
        -webkit-column-break-inside: auto !important;
        orphans: 1 !important;
        widows: 1 !important;
        display: block !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        /* Remove any margin/padding that might affect break calculations */
        margin-top: 0 !important;
        margin-bottom: 0 !important;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
    }
    
    .quote-author,
    .quote-attribution,
    .reference {
        font-size: 9pt;
        font-style: italic;
        display: block;
        margin-top: 0.5rem;
        text-align: right;
    }
    
    /* Lists */
    ul, ol {
        page-break-inside: auto;
        margin: 0.5em 0;
        padding-left: 1.5em;
    }
    
    li {
        page-break-inside: avoid;
        orphans: 2;
        widows: 2;
        margin-bottom: 0.3em;
    }
    
    /* Allow breaks in lists inside cards/boxes */
    div[style*="background-color"] ul,
    div[style*="background-color"] ol,
    div[style*="background:"] ul,
    div[style*="background:"] ol {
        page-break-inside: auto !important;
    }
    
    /* Allow breaks in list items inside cards, but keep individual items together */
    div[style*="background-color"] li,
    div[style*="background:"] li {
        page-break-inside: avoid !important;
        orphans: 1 !important;
        widows: 1 !important;
    }
    
    /* Tables */
    table {
        page-break-inside: auto;
        border-collapse: collapse;
        width: 100%;
        margin: 1rem 0;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
    }
    
    tr {
        page-break-inside: avoid;
    }
    
    th, td {
        border: 1px solid #000 !important;
        padding: 0.4rem;
        text-align: left;
        background: #fff !important;
        color: #000000 !important;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
    }
    
    th {
        font-weight: bold;
        background: #f5f5f5 !important;
        color: #000000 !important;
    }
    
    /* Chapter headers */
    .chapter-header,
    .chapter-title {
        /* Default: allow natural flow, but prefer to start on new page if space allows */
        page-break-before: auto;
        page-break-after: avoid;
        margin-top: 0;
        margin-bottom: 1em;
    }
    
    /* Force page break before chapter only when preceded by other content */
    /* This prevents blank pages when opening a chapter file directly (where title is first element) */
    /* but ensures chapters start on new page when printing full book */
    body > *:not(.chapter-title):not(.navigation):not(nav) + .chapter-title,
    nav + .chapter-title,
    .navigation + .chapter-title,
    .chapter-title + .chapter-title {
        page-break-before: always;
    }
    
    /* Special case: if there's content before the first chapter title, force break */
    /* This handles TOC or other content before chapters */
    body > h1:first-child + .chapter-title,
    body > div:first-child:not(.chapter-title) + .chapter-title {
        page-break-before: always;
    }
    
    .chapter-number {
        font-size: 16pt !important;
        font-weight: bold !important;
        margin-bottom: 0.5rem !important;
        text-align: center !important;
        display: block !important;
    }
    
    .chapter-title {
        display: block !important;
        text-align: center !important;
    }
    
    .chapter-title > .chapter-number + *,
    .chapter-title-text {
        display: block !important;
        margin-top: 0 !important;
        text-align: center !important;
        width: 100% !important;
    }
    
    .chapter-title-text {
        font-size: 20pt !important;
        font-weight: bold !important;
    }
    
    /* Part pages */
    .part-title,
    [id^="part"] {
        page-break-before: always;
        page-break-after: avoid;
    }
    
    /* Fix part pages with flexbox and min-height - override inline styles */
    div[style*="display: flex"] {
        display: block !important;
        min-height: auto !important;
        height: auto !important;
        padding: 1rem 0 !important;
        padding-top: 2rem !important;
        background: #fff !important;
        page-break-inside: avoid !important;
    }
    
    div[style*="min-height: 100vh"] {
        min-height: auto !important;
        height: auto !important;
    }
    
    /* Ensure part page content displays */
    div[style*="display: flex"] > div {
        display: block !important;
        margin: 0 auto !important;
        padding: 1rem !important;
        page-break-inside: avoid !important;
    }
    
    /* Prevent page break between PART label and title on part pages */
    div[style*="margin: 3rem 0"],
    div[style*="margin: 3rem"] {
        page-break-inside: avoid !important;
    }
    
    /* Keep PART number and title together */
    div[style*="font-size: 1.5rem"][style*="PART"],
    h1[id^="part"],
    h1[id*="part"] {
        page-break-after: avoid !important;
        page-break-inside: avoid !important;
    }
    
    /* Container holding PART label and title - keep together */
    body > div[style*="display: flex"] > div > div[style*="margin: 3rem"] {
        page-break-inside: avoid !important;
    }
    
    /* Title page - fix for print */
    .title-page {
        min-height: auto !important;
        height: auto !important;
        display: block !important;
        padding: 2rem 0 !important;
        page-break-after: always;
    }
    
    .title-page .main-title {
        display: block !important;
        text-align: center !important;
        font-size: 36pt !important;
        font-weight: bold !important;
        margin-top: 2.5in !important;
        margin-bottom: 2rem !important;
        color: #000 !important;
    }
    
    .title-page .subtitle,
    .title-page .subtitle-2,
    .title-page .author-name {
        display: block !important;
        text-align: center !important;
        margin: 1rem 0 !important;
    }
    
    .title-page .cover-image {
        display: block !important;
        text-align: center !important;
        margin: 1rem auto !important;
        max-width: 100% !important;
    }
    
    /* Copyright page - fix for print */
    .copyright-page {
        min-height: auto !important;
        height: auto !important;
        display: block !important;
        padding: 2rem 0 !important;
    }
    
    /* Prevent page breaks in key sections */
    .note,
    .callout-title,
    .key-insight-title {
        page-break-after: avoid;
        margin-bottom: 0.5rem !important;
    }
    
    /* Keep note titles with their following content */
    .note-title {
        page-break-after: avoid !important;
        orphans: 2 !important;
        widows: 2 !important;
    }
    
    /* Ensure note paragraphs stay with their title */
    .note .note-title + p {
        page-break-before: avoid !important;
        orphans: 3 !important;
        widows: 3 !important;
    }
    
    /* Links - show URL in print (color from normal styles / kdp-mode override) */
    a {
        text-decoration: underline;
    }
    
    a[href^="http"]:after,
    a[href^="www"]:after {
        content: " (" attr(href) ")";
        font-size: 8pt;
        color: #666 !important;
    }
    
    /* Drop caps */
    .drop-cap {
        float: left;
        font-size: 3em;
        line-height: 0.8;
        padding-right: 0.1em;
    }
    
    /* Hide screen-only elements */
    .no-print,
    .screen-only {
        display: none !important;
    }
    
    /* Ensure proper spacing for print */
    .divider {
        border-top: 2px solid #000 !important;
        margin: 1.5em 0;
    }
    
    /* Boxes with colored backgrounds - convert to borders, but preserve existing borders */
    div[style*="background-color"]:not([style*="border: none"]):not([style*="border:none"]):not([style*="background: #fff8e1"]):not([style*="background: #e8f5e9"]):not([style*="background:#fff8e1"]):not([style*="background:#e8f5e9"]) {
        background: #fff !important;
        box-sizing: border-box !important;
        max-width: 95% !important;
        width: 95% !important;
        margin-left: auto !important;
        margin-right: auto !important;
    }
    
    /* If no border exists, add one - but exclude book series cards */
    div[style*="background-color"]:not([style*="border"]):not([style*="background: #fff8e1"]):not([style*="background: #e8f5e9"]):not([style*="background:#fff8e1"]):not([style*="background:#e8f5e9"]) {
        border: 1px solid #000 !important;
    }
    
    /* Explicitly remove borders and adjust backgrounds for book series cards */
    div[style*="background: #fff8e1"],
    div[style*="background: #e8f5e9"],
    div[style*="background:#fff8e1"],
    div[style*="background:#e8f5e9"] {
        border: none !important;
        border-left: 4px solid #000 !important;
        background: transparent !important;
        max-width: 100% !important;
        width: 100% !important;
    }
    
    /* Ensure horizontal rules print */
    hr {
        border: none !important;
        border-top: 2px solid #000 !important;
        height: 2px !important;
        margin: 1rem auto !important;
        display: block !important;
    }
    
    /* Comparison tables and infographics */
    .comparison-table td,
    .comparison-table th {
        border: 1px solid #000 !important;
        background: #fff !important;
        color: #000 !important;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
    }
    
    .comparison-table th {
        background: #f5f5f5 !important;
        color: #000 !important;
    }
    
    .comparison-title {
        background: #f5f5f5 !important;
        color: #000 !important;
        border-color: #000 !important;
    }
    
    /* Fix infographic border visibility in print */
    .infographic {
        max-width: 95% !important;
        width: 95% !important;
        box-sizing: border-box !important;
        margin-left: auto !important;
        margin-right: auto !important;
        padding: 1rem !important;
        border: 1px solid #000 !important;
        page-break-inside: auto !important;
        background: #fff !important;
        color: #000 !important;
        -webkit-print-color-adjust: economy !important;
        print-color-adjust: economy !important;
    }
    
    /* Fix bordered divs with background-color in print - ensure right border is visible */
    div[style*="background-color"][style*="border"] {
        box-sizing: border-box !important;
        max-width: 95% !important;
        width: 95% !important;
        margin-left: auto !important;
        margin-right: auto !important;
    }
    
    /* Ensure flex containers inside bordered divs also respect box-sizing */
    div[style*="background-color"] div[style*="display: flex"] {
        box-sizing: border-box !important;
        width: 100% !important;
    }
    
    /* Ensure flex items respect box-sizing */
    div[style*="background-color"] div[style*="flex:"] {
        box-sizing: border-box !important;
    }
    
    .three-part-journey {
        box-sizing: border-box !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    .journey-box {
        box-sizing: border-box !important;
        margin: 0.5em !important;
        padding: 1rem !important;
        border: 1px solid #000 !important;
        page-break-inside: auto !important;
    }
    
    /* Ensure all inline styles with colors are converted ONLY in kdp-mode */
    body.kdp-mode [style*="color:"] {
        color: #000 !important;
    }
    
    /* FINAL CATCH-ALL: Hide ALL navigation buttons when printing - applies to ALL print scenarios */
    /* This rule should be last to override anything else - maximum specificity */
    /* Target elements with inline styles that might override CSS */
    nav.navigation,
    .navigation,
    nav[class="navigation"],
    nav[class*="navigation"],
    [class*="navigation"],
    html nav.navigation,
    html .navigation,
    body nav.navigation,
    body .navigation,
    nav:not([epub\:type="toc"]):not([epub|type="toc"]),
    /* Target navigation elements with inline style attributes */
    nav[style],
    nav.navigation[style],
    .navigation[style],
    nav[class="navigation"][style],
    nav[class*="navigation"][style] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
        overflow: hidden !important;
        position: absolute !important;
        left: -9999px !important;
        clip: rect(0, 0, 0, 0) !important;
    }
    
    /* CRITICAL: Target navigation links with inline display styles */
    nav.navigation a[style],
    .navigation a[style],
    nav[class="navigation"] a[style],
    nav[class*="navigation"] a[style],
    [class*="navigation"] a[style],
    nav[style] a[style],
    nav[style] a,
    /* Target any link with inline display: inline-block */
    a[style*="display: inline-block"],
    a[style*="display:inline-block"],
    a[style*="display: inline"],
    a[style*="display:inline"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        position: absolute !important;
        left: -9999px !important;
        clip: rect(0, 0, 0, 0) !important;
    }
    
    /* Hide ALL children of navigation elements */
    nav.navigation *,
    .navigation *,
    nav[class="navigation"] *,
    nav[class*="navigation"] *,
    [class*="navigation"] *,
    nav:not([epub\:type="toc"]):not([epub|type="toc"]) * {
        display: none !important;
        visibility: hidden !important;
    }
    
    /* KDP-mode specific rules (for backward compatibility) */
    body.kdp-mode nav.navigation,
    body.kdp-mode .navigation,
    body.kdp-mode nav[class="navigation"],
    html body.kdp-mode nav.navigation,
    html body.kdp-mode .navigation {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
        overflow: hidden !important;
        position: absolute !important;
        left: -9999px !important;
        clip: rect(0, 0, 0, 0) !important;
    }
    
    /* Hide ALL children of navigation elements */
    body.kdp-mode .navigation *,
    body.kdp-mode nav.navigation *,
    body.kdp-mode nav[class="navigation"] * {
        display: none !important;
        visibility: hidden !important;
    }
    
    /* Exception: Only allow TOC content nav - must come after hiding rules */
    body.kdp-mode nav[epub\:type="toc"] {
        display: block !important;
        visibility: visible !important;
    }
    
    /* Preserve TOC links - must be after the .navigation * rule */
    body.kdp-mode nav[epub\:type="toc"] * {
        display: block !important;
        visibility: visible !important;
    }
    
    body.kdp-mode nav[epub\:type="toc"] a {
        display: block !important;
        visibility: visible !important;
    }
}

/* Optional color-print mode.
   Add class "color-print" to the <body> element before printing
   if you want a color 6x9 PDF instead of forced black & white. */
@media print {
    body.color-print {
        background: #ffffff !important;
        color: var(--text-color, #2d3748) !important;
        font-family: 'Georgia', 'Times New Roman', Times, serif;
        font-size: 11pt;
        line-height: 1.6;
        max-width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        text-align: justify;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* Restore heading colors in color-print mode */
    body.color-print h1,
    body.color-print h2,
    body.color-print h3,
    body.color-print h4,
    body.color-print h5,
    body.color-print h6 {
        color: #2c3e50 !important;
    }

    /* Ensure colored boxes and callouts keep their background colors */
    body.color-print .callout,
    body.color-print .note,
    body.color-print .infographic,
    body.color-print .contrast-box,
    body.color-print .comparison-table th,
    body.color-print table th {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }
}